#Global background
#:import utils kivy.utils
<Background_Color@Widget>:               
    background_color: 1, 0, 0, 1
    canvas.before:
        Color:
            rgb: utils.get_color_from_hex('#a6a6a6')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]


#Buttons in Renting window -- There must be Float Layout first
<Window_Button@Button+Background_Color>:
    size_hint: (.6, .4)
    pos_hint : {"top" : 0.7, "x" : 0.2}
    halign : "center"
    background_color: 0,0,0,0


<Main_window>:

    list :list
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'kivy_img/Background.png'

    BoxLayout:
        halign: 'center'
        orientation: 'vertical'
        spacing: 10

        Image:
            source: 'kivy_img/LOGO.png'
            size_hint_y: .3
    

        GridLayout:
            cols: 2


            ScrollView:              
                GridLayout:
                    size_hint_y: None
                    cols:1
                    id: list
                    height: self.minimum_height
                    spacing: 10
                    padding: 10



            BoxLayout:
                size_hint_x: .3
                halign: 'center'
                orientation: 'vertical'
                spacing: 10

                
                Label: 
                    halign: 'center'
                    font_size: 25
                    text: "Put item \non the RFID \nReader"
                
                Window_Button:
                    text : "Reload base"
                    size_hint_y: 0.2
                    pos_hint: {'y': 0.5, 'x':0.2}
                    color: 0, 0, 0, 1
                    on_release: 
                        root.dev_base()
                   
                
                


            



<Renting_window>:

    us_name : us_name
    us_surname : us_surname
    us_index : us_index
    us_email : us_email
    us_phone : us_phone

    dev_name : dev_name
    dev_id : dev_id
    dev_mac : dev_mac
    return_date : return_date

    GridLayout:
        cols: 1

        Label:
            text: "RFID Logger"
            size_hint_y : .2

        GridLayout:
            cols: 2
            spacing: [15]

            GridLayout:
                cols: 2
                spacing: [15]

                Label: 
                    text: "Name"
                    
                TextInput:
                    id: us_name
                    multiline: False
                    on_text_validate:
                        root.empty_value("Name",us_name.text)


                Label: 
                    text: "Surname"
                
                TextInput:
                    id: us_surname
                    multiline: False
                    on_text_validate:
                        root.empty_value("Surname",us_surname.text)

                Label: 
                    text: "Index"
                
                TextInput:
                    id: us_index
                    multiline: False

                Label: 
                    text: "E-mail"
                
                TextInput:
                    id: us_email
                    multiline: False
                    on_text_validate:
                        root.empty_value("E-mail",us_email.text)

                Label: 
                    text: "Phone"
                
                TextInput:
                    id: us_phone
                    multiline: False
                

            GridLayout:
                cols: 1
                size_hint_x : .8

                Label:
                    id: dev_name
                    text: "Item name"

                Label:
                    id: dev_id
                    text: "Item ID"

                Label:
                    id: dev_mac
                    text: "Item MAC"

                Label:
                    text: root.today()
                    

                TextInput:
                    id: return_date
                    multiline: False  
                    hint_text: "Date of return <YYYY-MM-DD>"
                    on_text_validate:
                        root.check_date()

        GridLayout:
            cols: 3
            size_hint_y : .4

            FloatLayout:
                Window_Button:
                    text: "Rent"
                    on_release: root.rent_button()
                    background_color: 1, 1, 0, 1          
                        
            FloatLayout:
                Window_Button:
                    text: "Scan Student \nCard"
                    on_release: root.scan_student_card_button()

            FloatLayout:
                Window_Button:
                    text: "Cancel"
                    on_release: root.cancel_button()    
                





<Return_window>:

    us_name : us_name
    us_surname : us_surname
    us_index : us_index
    us_email : us_email
    us_phone : us_phone

    dev_name : dev_name
    dev_id : dev_id
    dev_mac : dev_mac
    dev_date : dev_date
    return_date : return_date
    return_button_id : return_button_id
    GridLayout:
        cols: 1
        
        Label:
            text: "RFID Logger"
            size_hint_y : .2

        FloatLayout:
            GridLayout:
                cols: 2
                spacing: [15]
                size_hint: (.8, .7)
                pos_hint : {"x" : 0.1, "y" : 0.2}

                GridLayout:
                    cols: 1
                    spacing: [15]

                    Label: 
                        id: us_name
                        text: "Name"
                        text_size: self.width, None

                    Label: 
                        id: us_surname
                        text: "Surname"
                        text_size: self.width, None

                    Label: 
                        id: us_index
                        text: "Index"
                        text_size: self.width, None

                    Label: 
                        id: us_email
                        text: "E-mail"
                        text_size: self.width, None

                    Label: 
                        id: us_phone
                        text: "Phone"
                        text_size: self.width, None


                GridLayout:
                    cols: 1
                    spacing: [15]

                    Label: 
                        id: dev_name
                        text: "Name"

                    Label: 
                        id: dev_id
                        text: "ID"

                    Label: 
                        id: dev_mac
                        text: "MAC"

                    Label: 
                        id: dev_date
                        text: root.today()

                    TextInput: 
                        id: return_date
                        multiline: False  
                        hint_text: "Date of return <YYYY-MM-DD>"
                        on_text_validate:
                            root.check_date()




        GridLayout:
            cols: 2
            size_hint_y : .2

            FloatLayout:
                Button:
                    id: return_button_id
                    text: "Return"
                    size_hint: (.5, .4)
                    pos_hint : {"top" : 0.7, "right" : 0.7}
                    on_release: 
                        root.return_button()

            FloatLayout:
                Button:
                    text: "Cancel"
                    size_hint: (.5, .4)
                    pos_hint : {"top" : 0.7, "right" : 0.7}
                    on_release: 
                        root.cancel_button()      






<Not_exist_window>:
    dev_name : dev_name
    dev_mac : dev_mac

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'kivy_img/Background.png'

    BoxLayout:
        halign: 'center'
        orientation: 'vertical'
        spacing: 10
        Label:
        Image:
            source: 'kivy_img/LOGO.png'

        Label: 
            text: "Add new item to database"
            size_hint_y: .2

        Label:
            id: dev_id
            size_hint_y: .2
            text: "Item ID"

        Label:
            id: dev_mac
            size_hint_y: .2
            text: "Device MAC"


        TextInput:
            size_hint_x : 0.6
            pos_hint: {'x': 0.2}
            background_color: (0, 0, 0, 0)
            id: dev_name
            multiline: False  
            hint_text: "______________ New device's name ______________"
            halign: 'center'
            on_text_validate:
                root.empty_value("Device name", dev_name.text)

        
        Label:      

        GridLayout:
            cols: 2
            size_hint_y : 0.8

            FloatLayout:
                Window_Button:
                    text: "Add"
                    color: (0, 0, 0, 1)
                    on_release:
                        root.add_button()

            FloatLayout:
                Window_Button:
                    text: "Cancel"
                    color: (0, 0, 0, 1)
                    on_release:
                        root.cancel_button()
 